<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>For You ‚ù§Ô∏è</title>

<style>
body{
    margin:0;
    text-align:center;
    font-family:Arial, Helvetica, sans-serif;
    background:#ffe6f0;
}

.container{
    padding:25px;
}

button{
    padding:15px 25px;
    font-size:18px;
    margin:15px;
    cursor:pointer;
    border-radius:10px;
    border:none;
}

img, video{
    max-width:90%;
    max-height:60vh;
    border-radius:15px;
    box-shadow:0 0 20px rgba(0,0,0,0.2);
}

.caption{
    font-size:19px;
    margin-top:15px;
}

#noBtn{
    transition:left 0.15s, top 0.15s;
}
</style>

<!-- Confetti Library -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

</head>
<body>

<div class="container" id="app">
<h1>Hey Bujjammaluuuu‚ù§Ô∏è</h1>
<p>I made something just for you...</p>
<button onclick="start()">Start</button>
</div>

<script>

// ================= MEDIA DATA =================
// EDIT ONLY CAPTIONS IF YOU WANT

const media = [
  {type:"image", src:"photo1.jpg", caption:"Our very first photo!"},
  {type:"image", src:"photo2.jpg", caption:"The day we kissed for the first time!"},
  {type:"video", src:"video1.mp4", caption:"I love when you yap!"},
  {type:"image", src:"photo3.jpg", caption:"My favourite photo of yours lol!"},
  {type:"video", src:"video2.mp4", caption:"First time we ever held hands and walked!"},
  {type:"image", src:"photo4.jpg", caption:"First temple visit together! Also gundu me üòÑ"}
];

let index = 0;
let music;
let noClicks = 0;

// ================= START =================

function start(){
    music = new Audio("music.mp3");
    music.loop = true;
    music.play();   // iPhone allowed (user interaction)
    showMedia();
}

// ================= SHOW MEDIA =================

function showMedia(){
    let item = media[index];
    let content = "";

    if(item.type === "image"){
        content = `<img src="${item.src}">`;
    } else {
        content = `
            <video controls playsinline autoplay>
                <source src="${item.src}" type="video/mp4">
            </video>`;
    }

    document.getElementById("app").innerHTML = `
        ${content}
        <div class="caption">${item.caption}</div>
        <button onclick="next()">Next ‚ù§Ô∏è</button>
    `;
}

// ================= NEXT =================

function next(){
    index++;
    if(index < media.length){
        showMedia();
    } else {
        question();
    }
}

// ================= QUESTION =================

function question(){
    document.getElementById("app").innerHTML = `
        <h1>Will you be my Valentine? ‚ù§Ô∏è</h1>
        <button onclick="yes()">Yes</button>
        <button id="noBtn" onclick="dodgeNo()">No</button>
    `;
}

// ================= MOBILE SAFE DODGE =================

function dodgeNo(){

    const btn = document.getElementById("noBtn");

    const responses = [
        "No",
        "Are you sure?",
        "Really sure?",
        "Think again üòú",
        "Last chance!",
        "Just press Yes ‚ù§Ô∏è"
    ];

    if(noClicks < responses.length-1){
        noClicks++;
        btn.innerText = responses[noClicks];
    }

    const maxX = window.innerWidth - btn.offsetWidth;
    const maxY = window.innerHeight - btn.offsetHeight;

    btn.style.position = "fixed";
    btn.style.left = Math.random()*maxX + "px";
    btn.style.top = Math.random()*maxY + "px";
}

// ================= YES =================

function yes(){
    music.pause();

    // Confetti burst
    confetti({
        particleCount: 200,
        spread: 100,
        origin: { y: 0.6 }
    });

    document.getElementById("app").innerHTML = `
        <h1>You just made me the happiest person ‚ù§Ô∏è</h1>
        <p>I can't wait for our date üôÇ</p>
    `;
}

</script>

</body>
</html>
